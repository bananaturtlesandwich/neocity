<!DOCTYPE html>
<html lang="en">
  <head>
    <title>blue fire rando</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="hey i'm kinda good at this">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="display.js"></script>
  </head>
  <body onload="display('about')">
    <div class="sidebar">
      files
      <hr>
      <a onclick="display('about')">about.txt</a>
      <a onclick="display('concept')">concept.txt</a>
      <a onclick="display('devlog')">devlog.txt</a>
    </div>
    
    <main id="display">
      <h2>no file selected</h2>
    </main>
    
    <div id="about" hidden>
      <h1>about</h1>
      <p>
        the <a href="https://github.com/bananaturtlesandwich/blue-fire-rando" target="_blank" rel="noopener noreferrer">blue fire rando</a>
        is a game mode for blue fire that enhances replayability by shuffling pickups randomly
        while ensuring the game is still beatable without glitches
      </p>
      <img src="blue-fire-rando-about.png" alt="blue fire rando" style="width: 100%">
    </div>
    
    <div id="concept" hidden>
      <h1>concept</h1>
      <p>
        the idea for the blue fire rando came from the hollow knight randomiser which i thought was really cool
        so i thought even though blue fire is not a fully fledged metroidvania it would add more replayability for one of my favourite games
      </p>
    </div>
    
    <div id="devlog" hidden>
      <h1>devlog</h1>
      <b>previous logs are in a physical notebook so here's a summary of those</b>
      <p>
        it all started with a single conversation with my chill yet sometimes aggravating fried Luukie13.
        the idea was simple to understand but difficult to implement.
        a program that shuffles the locations of items, spirits, emotes, weapons and tunics.
        of course if this was unity this would be simple however blue fire was made in unreal.
      </p>
      <p>
        i remember delaying the inevitable implementation for so long by just messing around in winforms
        but eventually i psyched myself up enough to start trying
      </p>
      <p>
        at first i approached the idea of changing enums and datatables -
        that didn't get me anywhere as it could only mix within types.
        i encountered the same problem plus default values not appearing
        when experimenting with references in maps and pretty much gave up
      </p>
      <p>
        however then i start working on stove and discovered something that delighted me -
        i could change default property values by just adding them to the actor.
        this meant so much as it knocked out two birds with one stone - it meant that chests could mix
        and that chests with sapphire ore could be changed.
        but this didn't affect cutscenes and npcs which really sucked.
        i did manage to change shops which were located in the savegame blueprint so i could edit them there (actually nilo still doesn't work :p).
        however the npcs and cutscenes were still yet to be figured out.
      </p>
      <p>
        i was quite concerned about making the logic for the randomiser
        and turned to the hollow knight implementation, randocore.
        i had a nice chat with homothetyhk who created the library
        and eventually came to the conclusion i should just implement it myself.
      </p>
      <p>
        to randomise npcs and cutscenes, naturally i discovered a new modding technique - function library hooking.
        <ul>
          <li>create a dummy of the function library with all the correct function names, inputs and outputs and then duplicate that</li>
          <li>name that duplicate to whatever you want and for each function in it call the original function that is in your dummy (i'd back this duplicate up)</li>
          <li>then you can change the function to do whatever you want</li>
          <li>cook the project and you'll have your hook and your dummy</li>
          <li>delete the dummy</li>
          <li>change any name reference to the function library in the target actor to your hook</li>
          <li>since you didn't include the dummy the game will call the actual functions provided the function target is the dummy along with your stuff</li>
        </ul>
        and finally full randomisation was possible after transplanting was put into stove
      </p>
      <p>
        after the gargantuan task of documenting checks was finished it was done.
        after that i managed to optimise writing to be so much faster from 5 minutes to 5 seconds
      </p>
      <p>
        once the pseudoregalia rando was finished i updated the blue fire rando with the logic improvements 
        (shuffling within each area and freezing progression items made progression appearing early very likely).
      </p>
    </div>
    
    <a href="../coding.html" class="rotate">
    	<img src="../back.png" alt="back" style="position: absolute; top: 1vw; left: 1vw; width: 15vw">
      <span class="text" style="top: 1vw; left: 16vw">back</span>
    </a>
  </body>
</html>
